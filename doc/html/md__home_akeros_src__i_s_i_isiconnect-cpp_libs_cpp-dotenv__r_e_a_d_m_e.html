<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IsiConnect-cpp: &lt;a href=&quot;https://github.com/adeharo9/cpp-dotenv&quot;&gt;C++ .ENV&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IsiConnect-cpp
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a href="https://github.com/adeharo9/cpp-dotenv">C++ .ENV</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="https://raw.githubusercontent.com/adeharo9/cpp-dotenv/master/cpp-dotenv.png" alt="cpp-dotenv" align="right" class="inline"/></p>
<p><img src="https://img.shields.io/badge/version-v1.0.0--alpha-blue" alt="v1.0.0-alpha" title="v1.0.0-alpha" class="inline"/> <img src="https://img.shields.io/badge/license-BSD%203--clause-green" alt="BSD 3-clause license" title="BSD 3-clause license" class="inline"/></p>
<p>Loads environment variables from <code>.env</code> files for C++ projects.</p>
<p>C++ implementation of NodeJS <a href="https://github.com/motdotla/dotenv">dotenv</a> project. <code>load_dotenv()</code> method API inspired by Python's <a href="https://pypi.org/project/python-dotenv/">python-dotenv</a> port of the dotenv project.</p>
<blockquote class="doxtable">
<p><em><b>NOTE: please take into account this is still a developing project.</b></em> </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md8"></a>
Table of contents</h1>
<ol type="1">
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#build">Build</a><ol type="a">
<li><a href="#cmake">CMake</a></li>
</ol>
</li>
<li><a href="#usage">Usage</a><ol type="a">
<li><a href="#load_dotenv-method"><code>load_dotenv()</code> method</a></li>
</ol>
</li>
<li><a href="#features">Features</a><ol type="a">
<li><a href="#error-reporting">Error reporting</a></li>
<li><a href="#escape-sequence-expansion">Escape sequence expansion</a></li>
<li><a href="#variable-overwritting">Variable overwritting</a></li>
<li><a href="#variable-resolution">Variable resolution</a></li>
</ol>
</li>
<li><a href="#examples">Examples</a><ol type="a">
<li><a href="#basic-usage">Basic usage</a></li>
<li><a href="#reference-renaming">Reference renaming</a></li>
<li><a href="#several-dotenv-files">Several dotenv files</a></li>
<li><a href="#variable-resolution-1">Variable resolution</a></li>
</ol>
</li>
<li><a href="#known-limitations">Known limitations</a></li>
<li><a href="#grammar">Grammar</a></li>
</ol>
<h1><a class="anchor" id="autotoc_md9"></a>
Dependencies</h1>
<p><b>NONE</b>, for sure! :sunglasses: If it had any, it wouldn't follow the basic dotenv principles. All the needed libraries are shipped with this repository right out of the box.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Build</h1>
<p>Supported build methods are:</p>
<ul>
<li><a href="#cmake">CMake</a> (&gt;=3.10)</li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
CMake</h2>
<p><b>cpp-dotenv</b> comes with support for <code>CMake</code> right out of the box. In order to use it, simply include this repository's directory and link the <code>cpp_dotenv</code> target to your own targets where needed:</p>
<div class="fragment"><div class="line">add_subdirectory(cpp-dotenv)</div>
</div><!-- fragment --><div class="fragment"><div class="line">target_link_libraries(YOUR_TARGET cpp_dotenv)</div>
</div><!-- fragment --><p>After this, you might use the library as described in <a href="#usage">usage</a>; no extra scoping, no need to worry about the project's directory structure.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Usage</h1>
<p>To be able to use the dotenv classes, simply include the main header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;dotenv.h&quot;</span></div>
</div><!-- fragment --><p>For the sake of simplycity (and if your project namespace density allows to), you can also use the <code>dotenv</code> namespace under which all definitions are placed:</p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="classdotenv_1_1dotenv.html">dotenv</a>;</div>
</div><!-- fragment --><p>In order to bring your environment variables from your configuration files, simply make as many calls to the <code>load_dotenv()</code> method as needed with the appropriate paths (either relative to your executable's path or absolute) and arguments.</p>
<div class="fragment"><div class="line">env.load_dotenv();</div>
</div><!-- fragment --><p>Not passing any argument to the function is equivalent to tell <b>cpp-dotenv</b> to search for a file named <code>.env</code> at the same level as the executable that is making the call to the function.</p>
<p>For your convenience, there is a namespace-global reference variable to the <code>dotenv</code> singleton class instance named <code>env</code>. Simply use it as you would use a dotenv object on NodeJS, or you can define your own references:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span>&amp; dotenv = env; <span class="comment">// &#39;auto&#39; here is &#39;dotenv::dotenv&#39;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
&lt;tt&gt;load_dotenv()&lt;/tt&gt; method</h2>
<p>The <code>load_dotenv()</code> method, part of <code>class dotenv</code>, is declared in the <a href="/include/dotenv.h"><code>include/dotenv.h</code></a> file. Since all of its parameters have default values, it can be called with any number of arguments.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Signature</h3>
<div class="fragment"><div class="line">dotenv&amp; load_dotenv(<span class="keyword">const</span> std::string&amp; dotenv_path = <span class="stringliteral">&quot;.env&quot;</span>,</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">bool</span> overwrite = <span class="keyword">false</span>,</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">bool</span> interpolate = <span class="keyword">true</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md15"></a>
Parameters</h3>
<ul>
<li><code>dotenv_path</code>: path string, absolute or relative to the executable calling the function, of the dotenv file to be loaded. Default is <code>".env"</code>.</li>
<li><code>overwrite</code>: boolean representing whether or not to overwrite already-defined environment variables at loading time. Default is <code>false</code>.</li>
<li><code>interpolate</code>: boolean representing whether or not to resolve in-value variable references. Default is <code>true</code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md16"></a>
Return</h3>
<p>A reference to the <code>class dotenv</code> <code>this</code> object being used is returned, which allows for concatenating several <code>load_dotenv()</code> calls and serially load files.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Features</h1>
<p>The <b>cpp-dotenv</b> library has the following built-in features:</p>
<ul>
<li><a href="#error-reporting">Error reporting</a></li>
<li><a href="#escape-sequence-expansion">Escape sequence expansion</a></li>
<li><a href="#variable-overwritting">Variable overwritting</a></li>
<li><a href="#variable-resolution">Variable resolution</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Error reporting</h2>
<p><b>cpp-dotenv</b> reports and handles four different types of errors:</p>
<ul>
<li><b>Lexer errors</b>: errors produced by an incorrect format of the input language, i.e. usage of language features that do not belong to the dotenv syntax. This kind of errors throw irrecoverable exceptions.</li>
<li><b>Parsing errors</b>: errors produced by an incorrect use of the input language, i.e. the language syntax itself is correct, but it is used in an unexpected way. This kind of errors invalidate the variable they occurr in, making it to become as if it was not defined, but allowing the loading process to recover and continue.</li>
<li><b>Circular reference errors</b>: errors produced by variables that define a cycle of references, which are ultimately not resolved and their references are deleted from all the corresponding values. The variables they occurr in are ultimately defined as without the cycling references.</li>
<li><b>Undefined external reference warnings</b>: warnings produced by references to externally-loaded variables that are not present in the host environment. This variables are ultimately assigned their value as the empty string.</li>
</ul>
<h2><a class="anchor" id="autotoc_md19"></a>
Escape sequence expansion</h2>
<p>Escape sequence expansion happens in all of the loaded values (both string and raw form) right at the end of the loading process, after the variable resolution has already been performed.</p>
<p>Typical one-character escape sequences are supported (<code>\n</code>, <code>\t</code>, <code>\\</code>, etc.). Dotenv-spefic escape sequences are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Character </th><th class="markdownTableHeadCenter">Escape sequence  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>=</code> </td><td class="markdownTableBodyCenter"><code>\=</code>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>$</code> </td><td class="markdownTableBodyCenter"><code>\$</code>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>#</code> </td><td class="markdownTableBodyCenter"><code>\#</code>  </td></tr>
</table>
<blockquote class="doxtable">
<p><em>NOTE: escape sequences on externally-loaded variables <b>ARE NOT EXPANDED</b>.</em> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md20"></a>
Variable overwritting</h2>
<p>By default, already-defined environment variables are not overwritten even if redefined in some of the loaded files.</p>
<p>This behavior can be changed, however, by calling the <a href="#load_dotenv-method"><code>load_dotenv()</code> method</a> with the <a href="#parameters"><code>overwrite</code> parameter</a> set to <code>true</code>. For an example on how to use it, take a look at <a href="#several-dotenv-files">this one</a>.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Variable resolution</h2>
<p><b>cpp-dotenv</b> by default resolves variables nested inside variable definitions in the parsed files, both with those defined in the file being loaded or already present in the hosting environment itself.</p>
<ul>
<li>Variable reference with variables declared in the <b>same file</b> is order-independent: there's no need to worry about the declaration order of the variables inside a same file, <b>cpp-dotenv</b> will resolve all of the symbols regardless of their order of declaration.</li>
<li>Variable reference with variables declared on <b>different files</b> is order-depdendent on the loading order of the files via the <code>load_dotenv()</code> method: variables defined in later calls to <code>load_dotenv()</code> are not yet visible to files being processed at a previous load and will be treated as external variables.</li>
</ul>
<p>Variable resolution can be explicitly turned off by setting the <a href="#parameters"><code>interpolate</code> parameter</a> of the <a href="#load_dotenv-method"><code>load_dotenv()</code> method</a> to <code>false</code>.</p>
<blockquote class="doxtable">
<p><em>NOTE: variable references inside externally-loaded variables <b>ARE NOT RESOLVED</b>.</em> </p>
</blockquote>
<p>There are two different types of supported variable references:</p>
<ul>
<li><b>Raw-style unbounded references</b> of the style <code>$VAR_NAME</code>, which only support references composed by letters, numbers and underscores. Their name must start by a letter or by an underscore, and have at least one character.</li>
<li><b>Bounded references</b>, of the style <code>${VAR_NAME}</code>, which support a wider set of character possibilities.</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Examples</h1>
<h2><a class="anchor" id="autotoc_md23"></a>
Basic usage</h2>
<p>Assume the following <code>.env</code> file:</p>
<div class="fragment"><div class="line"># DB THINGS</div>
<div class="line">DB_NAME=DontDoThisAtHome</div>
<div class="line">DB_PASS=such_security</div>
<div class="line"> </div>
<div class="line"># CONNECTIONS THINGS</div>
<div class="line">COMMAND=ping</div>
<div class="line">HOST=8.8.8.8</div>
<div class="line">MESSAGE=&quot;Hey buddy!&quot;</div>
</div><!-- fragment --><p>The following <code>.cpp</code> file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;dotenv.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="classdotenv_1_1dotenv.html">dotenv</a>;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    env.load_dotenv();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;DB_NAME: &quot;</span> &lt;&lt; env[<span class="stringliteral">&quot;DB_NAME&quot;</span>] &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;eval \&quot;&quot;</span> &lt;&lt; env[<span class="stringliteral">&quot;COMMAND&quot;</span>] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; env[<span class="stringliteral">&quot;HOST&quot;</span>] &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p>would produce the following output:</p>
<div class="fragment"><div class="line">$ ./main</div>
<div class="line">  DB_NAME: DontDoThisAtHome</div>
<div class="line">  eval &quot;ping 8.8.8.8&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md24"></a>
Reference renaming</h2>
<p>Assuming the same <code>.env</code> file as in the <a href="#basic-usage">previous case</a>, the predefined <code>env</code> reference can be easily renamed and used just exactly as the original one. The <code>load_dotenv()</code> method also returns a reference to the object it is being applied to, so it can be easily nested in a case like this.</p>
<p>The following code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;dotenv.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span>&amp; <a class="code" href="classdotenv_1_1dotenv.html">dotenv</a> = dotenv::env.load_dotenv();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;DB_NAME: &quot;</span> &lt;&lt; <a class="code" href="classdotenv_1_1dotenv.html">dotenv</a>[<span class="stringliteral">&quot;DB_NAME&quot;</span>] &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;eval \&quot;&quot;</span> &lt;&lt; <a class="code" href="classdotenv_1_1dotenv.html">dotenv</a>[<span class="stringliteral">&quot;COMMAND&quot;</span>] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classdotenv_1_1dotenv.html">dotenv</a>[<span class="stringliteral">&quot;HOST&quot;</span>] &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p>would produce the following output:</p>
<div class="fragment"><div class="line">$ ./main</div>
<div class="line">  DB_NAME: DontDoThisAtHome</div>
<div class="line">  eval &quot;ping 8.8.8.8&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25"></a>
Several dotenv files</h2>
<p>The situation of having several different dotenv files is no stranger one (<code>.env</code> for private configuration variables, <code>.pubenv</code> for public variables, etc.). Loading several files and overwritting any variables that are redefined on the files can be done as follows:</p>
<p>Assume the following <code>.env</code> file:</p>
<div class="fragment"><div class="line"># DB THINGS</div>
<div class="line">DB_NAME=DontDoThisAtHome</div>
<div class="line">DB_PASS=such_security</div>
</div><!-- fragment --><p>And the following <code>.pubenv</code> file:</p>
<div class="fragment"><div class="line"># CONNECTIONS THINGS</div>
<div class="line">COMMAND=ping</div>
<div class="line">HOST=8.8.8.8</div>
<div class="line">MESSAGE=&quot;Hey buddy!&quot;</div>
</div><!-- fragment --><p>The following source file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;dotenv.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="classdotenv_1_1dotenv.html">dotenv</a>;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    env.load_dotenv(<span class="stringliteral">&quot;.env&quot;</span>, <span class="keyword">true</span>).load_dotenv(<span class="stringliteral">&quot;.pubenv&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;DB_NAME: &quot;</span> &lt;&lt; env[<span class="stringliteral">&quot;DB_NAME&quot;</span>] &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;eval \&quot;&quot;</span> &lt;&lt; env[<span class="stringliteral">&quot;COMMAND&quot;</span>] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; env[<span class="stringliteral">&quot;HOST&quot;</span>] &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p>would produce the following output:</p>
<div class="fragment"><div class="line">$ ./main</div>
<div class="line">  DB_NAME: DontDoThisAtHome</div>
<div class="line">  eval &quot;ping 8.8.8.8&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
Variable resolution</h2>
<p>Assume an environment variable <code>${HOST}</code> already defined on the host environment as <code>myweb.com</code> and the following <code>.env</code> file:</p>
<div class="fragment"><div class="line"># FULL URL</div>
<div class="line">URL=${URL_PROT}://${HOST}/${URL_SUBD}</div>
<div class="line"> </div>
<div class="line"># PARTIAL DEFINITIONS</div>
<div class="line">URL_PROT=https</div>
<div class="line">URL_SUBD=some/sub/page.html</div>
</div><!-- fragment --><p>The following <code>.cpp</code> file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;dotenv.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="classdotenv_1_1dotenv.html">dotenv</a>;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    env.load_dotenv();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;URL: &quot;</span> &lt;&lt; env[<span class="stringliteral">&quot;URL&quot;</span>] &lt;&lt; endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p>would produce the following output:</p>
<div class="fragment"><div class="line">$ ./main</div>
<div class="line">  URL: https://myweb.com/some/sub/page.html</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md27"></a>
Known limitations</h1>
<ul>
<li><em>Arbitrary octal value escape sequences are not expanded.</em></li>
<li><em>Arbitrary hexadecimal value escape sequences are not expanded.</em></li>
<li><em>Arbitrary unicode value escape sequences are not expanded.</em></li>
</ul>
<h1><a class="anchor" id="autotoc_md28"></a>
Grammar</h1>
<p>For the geeks, you can check the implemented grammars and all of the ANTLR-related files on the <a href="/common/antlr"><code>common/antlr/</code> directory</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aclassdotenv_1_1dotenv_html"><div class="ttname"><a href="classdotenv_1_1dotenv.html">dotenv::dotenv</a></div><div class="ttdef"><b>Definition:</b> dotenv.h:9</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
